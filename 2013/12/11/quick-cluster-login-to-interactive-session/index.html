<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: March 7, 2025 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&family=Karma&family=Mina&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&family=Karma&family=Mina&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.cfa383012e109fa07dd80bafcdf476df.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  






<script async src="https://www.googletagmanager.com/gtag/js?id=G-3CBVR6GQ07"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-3CBVR6GQ07', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>























  
  
  






  <meta name="author" content="Leonardo Collado-Torres" />





  

<meta name="description" content="To be able to do RNA-seq research work in large multi-sample studies you have to be able to analyze large files and thus frequently use a powerful computing environment. In my case, this means that I have to login to a computing cluster frequently." />



<link rel="alternate" hreflang="en-us" href="https://lcolladotor.github.io/2013/12/11/quick-cluster-login-to-interactive-session/" />
<link rel="canonical" href="https://lcolladotor.github.io/2013/12/11/quick-cluster-login-to-interactive-session/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#FF6771" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@lcolladotor" />
  <meta property="twitter:creator" content="@lcolladotor" />
<meta property="twitter:image" content="https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_512x512_fill_lanczos_center_3.png" />
<meta property="og:site_name" content="L. Collado-Torres" />
<meta property="og:url" content="https://lcolladotor.github.io/2013/12/11/quick-cluster-login-to-interactive-session/" />
<meta property="og:title" content="Login to the cluster, request a node and change to your project directory in a single command | L. Collado-Torres" />
<meta property="og:description" content="To be able to do RNA-seq research work in large multi-sample studies you have to be able to analyze large files and thus frequently use a powerful computing environment. In my case, this means that I have to login to a computing cluster frequently." /><meta property="og:image" content="https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2013-12-11T00:00:00&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2018-02-17T17:10:57-05:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lcolladotor.github.io/2013/12/11/quick-cluster-login-to-interactive-session/"
  },
  "headline": "Login to the cluster, request a node and change to your project directory in a single command",
  
  "datePublished": "2013-12-11T00:00:00Z",
  "dateModified": "2018-02-17T17:10:57-05:00",
  
  "author": {
    "@type": "Person",
    "name": "Leonardo Collado-Torres"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "L. Collado-Torres",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "To be able to do RNA-seq research work in large multi-sample studies you have to be able to analyze large files and thus frequently use a powerful computing environment. In my case, this means that I have to login to a computing cluster frequently."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>Login to the cluster, request a node and change to your project directory in a single command | L. Collado-Torres</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="4bd20126be65052787a88a1b75201e5e" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.028535d572102c468e4bcd43201c3601.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">L. Collado-Torres</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">L. Collado-Torres</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#team"><span>Team</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#talks_favorite"><span>Talks</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#publications"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#blog"><span>Blog</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#cv"><span>CV</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>Login to the cluster, request a node and change to your project directory in a single command</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Sat, Feb 17, 2018
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  
  
    <span class="middot-divider"></span>
    <a href="/2013/12/11/quick-cluster-login-to-interactive-session/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/computing/">Computing</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>To be able to do RNA-seq research work in large multi-sample studies you have to be able to analyze large files and thus frequently use a powerful computing environment. In my case, this means that I have to login to a <a href="http://en.wikipedia.org/wiki/Computer_cluster" target="_blank" rel="noopener">computing cluster</a> frequently. This is a common task for other biostatisticians (like those that do brain imagining studies) and many other people. When I am working on a project, I generally have to login to the cluster and then change the directory to the location where I have my project files.</p>
<p>A local cluster is normally composed of a login machine (enigma2 in my case) from where you can request to work on a node. There are several options for controlling this process of requesting a node, and in our institution we use a <a href="http://en.wikipedia.org/wiki/Oracle_Grid_Engine" target="_blank" rel="noopener">Sun/Oracle Grid Engine</a>. When a cluster has a lot of users, you want to dedicate the login machine as much as possible to handling login requests and assigning nodes for people to use. This means that you want to minimize doing any other kind of operations on the login machine, such as input/output operations.</p>
<h2 id="basic-workflow">Basic workflow</h2>
<p>This means that the steps I normally follow before getting to work on my project are:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Open the terminal</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Login to enigma</span>
</span></span><span class="line"><span class="cl">ssh username@enigma2.etc.edu
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Request a node to work on interactively</span>
</span></span><span class="line"><span class="cl">qrsh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Change to the directory where I have my project files</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> projectDir
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Done!</span>
</span></span></code></pre></div><p>For a long time I have used an <a href="http://en.wikipedia.org/wiki/Alias_%5c%28command%5c%29" target="_blank" rel="noopener">alias</a> for the login step. I have this alias in my local <code>.bashrc</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In local .bashrc file</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">enigma</span><span class="o">=</span><span class="s2">&#34;ssh username@enigma2.etc.edu&#34;</span>
</span></span></code></pre></div><p>Thus saving a tiny bit of typing:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Open terminal</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Login to enigma</span>
</span></span><span class="line"><span class="cl">enigma
</span></span><span class="line"><span class="cl"><span class="c1">## Etc</span>
</span></span><span class="line"><span class="cl">qrsh
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> projectDir
</span></span></code></pre></div><p>When the <code>projectDir</code> gets complicated, I make an <code>alias</code> on my <code>.bashrc</code> file on the cluster. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In cluster .bashrc file</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">pdir</span><span class="o">=</span><span class="s2">&#34;cd /very/complicated/path/to/projectDir/&#34;</span>
</span></span></code></pre></div><p>And finally, I can accomplish the setup task with minimal typing:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Open terminal</span>
</span></span><span class="line"><span class="cl">enigma
</span></span><span class="line"><span class="cl">qrsh
</span></span><span class="line"><span class="cl">pdir
</span></span></code></pre></div><h2 id="using-ssh-config">Using ssh config</h2>
<p>This section was added after Kasper Hansen&rsquo;s comment.</p>
<p>You can edit the ~.ssh/config file (check <a href="http://www.howtogeek.com/75007/stupid-geek-tricks-use-your-ssh-config-file-to-create-aliases-for-hosts/" target="_blank" rel="noopener">how to set it up</a>, <a href="http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/" target="_blank" rel="noopener">explained differently</a> and the <a href="http://linux.die.net/man/5/ssh_config" target="_blank" rel="noopener">manual</a>) to make things even better. This is how mine looks like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Host enigma
</span></span><span class="line"><span class="cl">	User username
</span></span><span class="line"><span class="cl">    Hostname enigma2.etc.edu
</span></span><span class="line"><span class="cl">	ForwardX11 yes
</span></span></code></pre></div><p>I like the ssh <code>-X</code> (or <code>-Y</code>) option so I can later view plots in X11 when running <code>R</code>. That is why the <strong>ForwardX11</strong> option is present.</p>
<p>Then you can use the following command to ssh into the cluster.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ssh enigma
</span></span></code></pre></div><p>Or if you prefer, simplify the bash alias to:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In local .bashrc file</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">enigma</span><span class="o">=</span><span class="s2">&#34;ssh enigma&#34;</span>
</span></span></code></pre></div><p>The sections below have been edited to assume that you are configured the <strong>enigma</strong> host shortcut in your ~.ssh/config file.</p>
<h2 id="needed-a-new-strategy">Needed a new strategy</h2>
<p>The previous strategy works and I had been very comfortable with it. However, at times you might forget to request a node from the cluster to do your work interactively. This is specially true for me when I only plan on using a few <code>git</code> commands. But when many users forget this, it becomes a problem and our cluster manager had to send us a reminder:</p>
<pre><code>*ALWAYS* work on a cluster node rather than on enigma2.
Enigma2 is a *single machine* with many people trying to use it to gain access to the cluster.
Even for tar commands, cp commands, wc commands ... first qrsh to a node.
</code></pre>
<h2 id="profiles-in-iterm2httpwwwiterm2com">Profiles in <a href="http://www.iterm2.com/" target="_blank" rel="noopener">iTerm2</a></h2>
<p>Just a few days after we got this reminder, I decided to take a look at the <a href="http://www.iterm2.com/" target="_blank" rel="noopener">iTerm2</a> profile menu. There are plenty of options for customizing your terminal, but the ones I mainly ended up using are:</p>
<ol>
<li><code>Working directory</code> -&gt; <code>Directory :</code> -&gt; choose a directory in my laptop. Generally the location of my <code>git</code> repository for version controlling the code of a given project.</li>
<li><code>Command</code> -&gt; <code>Send text at start</code> -&gt; an alias from my local <code>.bashrc</code> file as shown in the image below (the alias is <strong>qr</strong>).</li>
</ol>
<center>
<a href="http://lcolladotor.github.io/figs/2013-12-11-quick-cluster-login-to-interactive-session/iTerm2-profile-cluster.png"><img src="http://lcolladotor.github.io/figs/2013-12-11-quick-cluster-login-to-interactive-session/iTerm2-profile-cluster.png" alt="iTerm2 cluster profile screenshot" style="width: 400px;"/></a>
</center>
<p>The first case above is nice, but the real power comes from the second case. Since I can pretty much evaluate any command, I asked myself if I could set up a profile that automatically logs in to the cluster? Can it also request a node interactively? And even go to my project directory?</p>
<h2 id="cluster-qr-alias">cluster <code>qr</code> alias</h2>
<p>I then remembered that <a href="https://github.com/syounkin" target="_blank" rel="noopener">Samuel Younkin</a> explained to us how to set up <strong>qrsh</strong> to automatically change the directory to the directory from which you invoked <strong>qrsh</strong> (<span class="showtooltip" title="(2013). 'BiocHopkins.' ."><a href="http://bit.ly/19zLZeD">Younkin, 2013</a></span>). I modified things a little bit and saved this qrsh version as the <code>qr</code> alias on the cluster:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In cluster .bashrc file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## change dir automatically when using qrsh</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Details: https://github.com/rkostadi/BiocHopkins/wiki/Useless-Tips-&amp;-Code-Snippets</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -f ~/.bash_pwd <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">source</span> ~/.bash_pwd
</span></span><span class="line"><span class="cl">    rm ~/.bash_pwd
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">qr</span><span class="o">=</span><span class="s1">&#39;echo &#34;cd $PWD&#34; &gt; ~/.bash_pwd; history -w; qrsh&#39;</span>
</span></span></code></pre></div><p>Note that I tried using the <code>qrsh -ac</code> option, but couldn&rsquo;t get to pass a variable. Doing so in theory would remove the need to create the <strong>.bash_pwd</strong> temporary file.</p>
<h2 id="ssh-and-change-dir-in-one-command">ssh and change dir in one command</h2>
<p>Then googling I found how to <strong>ssh</strong> and change directory in one command (<span class="showtooltip" title="Frosty (2009). 'How can I ssh directly to a particular directory?' ."><a href="http://stackoverflow.com/questions/626533/how-can-i-ssh-directly-to-a-particular-directory">Frosty, 2009</a></span>):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ssh -t enigma <span class="s1">&#39;cd /very/complicated/path/to/projectDir/; bash&#39;</span>
</span></span></code></pre></div><p>The problem I soon encountered was that I couldn&rsquo;t <strong>qrsh</strong> right after because the command was not been found. Some setup files are not been read even after using <code>bash -l</code> like shown here:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ssh -t enigma <span class="s1">&#39;cd /very/complicated/path/to/projectDir/; bash -l&#39;</span>
</span></span></code></pre></div><h2 id="local-qr-alias">local <code>qr</code> alias</h2>
<p>With our cluster administrator&rsquo;s help, I was finally able to find how to do all of this in a single command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Requires the code by Sam Younkin to work (or the version I modified)</span>
</span></span><span class="line"><span class="cl">ssh -t enigma <span class="s1">&#39;cd /very/complicated/path/to/projectDir/; source /etc/profile; echo &#34;cd $PWD&#34; &gt; ~/.bash_pwd; history -w; qrsh&#39;</span>
</span></span></code></pre></div><p>Finally, I created the <code>qr</code> alias in my local machine. This alias:</p>
<ol>
<li>performs the ssh connection to the login machine of our cluster (enigma2),</li>
<li>then changes the directory to the project directory,</li>
<li>loads the necessary setup files so <strong>qrsh</strong> can be found on the path,</li>
<li>creates the temporary <strong>.bash_pwd</strong> file (you could even make this more concise by echoing the directory of interest to the temp file),</li>
<li>saves the command history as recommended by <a href="https://github.com/syounkin" target="_blank" rel="noopener">Samuel Younkin</a>,</li>
<li>requests an interactive node (with your default settings) by executing <strong>qrsh</strong>.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In local .bashrc file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># qrsh</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">qr</span><span class="o">=</span><span class="s2">&#34;ssh -t enigma &#39;cd /very/complicated/path/to/projectDir/; source /etc/profile; echo \&#34;cd \$PWD\&#34; &gt; ~/.bash_pwd; qrsh&#39;&#34;</span>
</span></span></code></pre></div><p>Note the use of the backslash to delay the execution of <code>$PWD</code>. I want it to be executed on the cluster, not on my local machine.</p>
<h2 id="glory">Glory!</h2>
<p>So now using <a href="http://www.iterm2.com/" target="_blank" rel="noopener">iTerm2</a> I can simply use the shortcut for my <em>cluster</em> profile which runs the local <code>qr</code> alias and the next thing I have is a terminal with an interactive session on the cluster and located in my project directory. Sweet! =)</p>
<p>Plus I also have the cluster <code>qr</code> alias for doing what <a href="https://github.com/syounkin" target="_blank" rel="noopener">Samuel Younkin</a> previously described.</p>
<h3 id="can-do-it-better">Can do it better?</h3>
<p>If you have suggestions on how to improve this, let me know!</p>
<h3 id="extra-aliases">Extra aliases</h3>
<p>The following two aliases take your local current directory basename and use it for accessing /very/complicated/path/to/projectDir/<strong>basename</strong>. This is useful if you use an organization similar to mine:</p>
<ul>
<li>Projects dir
<ul>
<li>Project 1 dir</li>
<li>Project 2 dir</li>
</ul>
</li>
</ul>
<p>The full paths are different in my computer and in the cluster, but once you are in  /very/complicated/path/to/projectDir/
it is all the same on both locations.</p>
<p>The first one runs <strong>qrsh</strong> while the second one doesn&rsquo;t request a node for interactive work.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## In local .bashrc file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## qrsh-basename</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">qs</span><span class="o">=</span><span class="s1">&#39;LEODIR=`basename $PWD`; ssh -t enigma &#34;cd /very/complicated/path/to/projectDir/$LEODIR/; source /etc/profile; echo \&#34;cd \$PWD\&#34; &gt; ~/.bash_pwd; history -w; qrsh&#34;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## basename, but no qrsh</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">qq</span><span class="o">=</span><span class="s1">&#39;LEODIR=`basename $PWD`; ssh -t enigma &#34;cd /very/complicated/path/to/projectDir/$LEODIR/; source /etc/profile; echo \&#34;cd \$PWD\&#34; &gt; ~/.bash_pwd; history -w; bash&#34;&#39;</span>
</span></span></code></pre></div><h3 id="references">References</h3>
<p>Citations made with <code>knitcitations</code> (<span class="showtooltip" title="Boettiger C (2013). knitcitations: Citations for knitr markdown files. R package version 0.4-7."><a href="http://CRAN.R-project.org/package=knitcitations">Boettiger, 2013</a></span>).</p>
<ul>
<li>Frosty,   (2009) How can I ssh directly to a particular directory?.  <em>How can I ssh directly to a particular directory? - Stack Overflow</em>  <a href="http://stackoverflow.com/questions/626533/how-can-i-ssh-directly-to-a-particular-directory" target="_blank" rel="noopener">http://stackoverflow.com/questions/626533/how-can-i-ssh-directly-to-a-particular-directory</a></li>
<li>BiocHopkins.  <em>GitHub</em>  <a href="http://bit.ly/19zLZeD" target="_blank" rel="noopener">http://bit.ly/19zLZeD</a></li>
<li>Carl Boettiger,   (2013) knitcitations: Citations for knitr markdown files.  <a href="http://CRAN.R-project.org/package=knitcitations" target="_blank" rel="noopener">http://CRAN.R-project.org/package=knitcitations</a></li>
</ul>
<h3 id="recap">Recap</h3>
<p>If you got lost, these are the basic modifications you need to make to your local and cluster <code>.bashrc</code> files.</p>
<script src="https://gist.github.com/lcolladotor/7897221.js"></script>
<p>Check the history of this post <a href="https://github.com/lcolladotor/lcolladotor.github.com/commits/master/_posts/2013-12-11-quick-cluster-login-to-interactive-session.md" target="_blank" rel="noopener">here</a>.</p>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/cluster/">cluster</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F&amp;text=Login&#43;to&#43;the&#43;cluster%2C&#43;request&#43;a&#43;node&#43;and&#43;change&#43;to&#43;your&#43;project&#43;directory&#43;in&#43;a&#43;single&#43;command" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F&amp;t=Login&#43;to&#43;the&#43;cluster%2C&#43;request&#43;a&#43;node&#43;and&#43;change&#43;to&#43;your&#43;project&#43;directory&#43;in&#43;a&#43;single&#43;command" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=Login%20to%20the%20cluster%2C%20request%20a%20node%20and%20change%20to%20your%20project%20directory%20in%20a%20single%20command&amp;body=https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F&amp;title=Login&#43;to&#43;the&#43;cluster%2C&#43;request&#43;a&#43;node&#43;and&#43;change&#43;to&#43;your&#43;project&#43;directory&#43;in&#43;a&#43;single&#43;command" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=Login&#43;to&#43;the&#43;cluster%2C&#43;request&#43;a&#43;node&#43;and&#43;change&#43;to&#43;your&#43;project&#43;directory&#43;in&#43;a&#43;single&#43;command%20https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Flcolladotor.github.io%2F2013%2F12%2F11%2Fquick-cluster-login-to-interactive-session%2F&amp;title=Login&#43;to&#43;the&#43;cluster%2C&#43;request&#43;a&#43;node&#43;and&#43;change&#43;to&#43;your&#43;project&#43;directory&#43;in&#43;a&#43;single&#43;command" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://lcolladotor.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu61670ae1305c5c407abf5eedc95c7971_127149_270x270_fill_q75_lanczos_center.JPG" alt="Leonardo Collado-Torres"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://lcolladotor.github.io/">Leonardo Collado-Torres</a></h5>
      <h6 class="card-subtitle">Investigator @ LIBD, Assistant Professor, Department of Biostatistics @ JHBSPH</h6>
      <p class="card-text"><a href="https://bsky.app/search?q=%23RStats" target="_blank" rel="noopener">#rstats</a> <a href="https://bsky.app/profile/bioconductor.bsky.social" target="_blank" rel="noopener">@Bioconductor</a>/ðŸ§  genomics <a href="https://bsky.app/profile/lieberinstitute.bsky.social" target="_blank" rel="noopener">@LieberInstitute</a>/<a href="https://twitter.com/lcgunam" target="_blank" rel="noopener">@lcgunam</a> <a href="https://bsky.app/profile/jhubiostat.bsky.social" target="_blank" rel="noopener">@jhubiostat</a> <a href="https://bsky.app/profile/jtleek.bsky.social" target="_blank" rel="noopener">@jtleek</a> <a href="https://bsky.app/profile/aejaffe.bsky.social" target="_blank" rel="noopener">@andrewejaffe</a> alumni/<a href="https://bsky.app/profile/libdrstats.bsky.social" target="_blank" rel="noopener">@LIBDrstats</a> <a href="https://bsky.app/profile/cdsbmexico.bsky.social" target="_blank" rel="noopener">@CDSBMexico</a> co-founder</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:lcolladotor@gmail.com" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="http://lcolladotor.github.io" target="_blank" rel="noopener">
        <i class="fas fa-home"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://bsky.app/profile/lcolladotor.bsky.social" target="_blank" rel="noopener">
        <i class="fab fa-bluesky"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/lcolladotor" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.youtube.com/@lcolladotor" target="_blank" rel="noopener">
        <i class="fab fa-youtube"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=h57-MykAAAAJ" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/lcolladotor" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="http://orcid.org/0000-0003-2140-308X" target="_blank" rel="noopener">
        <i class="ai ai-orcid"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://www.ncbi.nlm.nih.gov/myncbi/leonardo.collado%20torres.1/bibliography/public/" target="_blank" rel="noopener">
        <i class="ai ai-pubmed"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://impactstory.org/u/0000-0003-2140-308X" target="_blank" rel="noopener">
        <i class="ai ai-impactstory"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/lcollado/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://publons.com/a/1262671" target="_blank" rel="noopener">
        <i class="ai ai-publons"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="http://lcolladotor.github.io/cv/en_CV_lcollado.pdf" target="_blank" rel="noopener">
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  
  

  

  
  <section id="comments">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "fellgernonbit" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  










  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    All thoughts and opinions here are my own (Leonardo Collado Torres). The icon was designed by <a href="https://www.linkedin.com/in/mauricio-guzman-6529b551/" target="_blank" rel="noopener">Mauricio GuzmÃ¡n</a> and is inspired by <a href="https://en.wikipedia.org/wiki/Huichol" target="_blank" rel="noopener">Huichol culture</a>; it represents my community building interests. Â© 2011-2025 LCT. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank">CC BY NC SA 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-sa fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p>
      
      
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ef23e545d41b87c"></script>
      
      

      <script type="text/javascript">
      var addthis_config = {
      	data_ga_property: 'UA-45299226-1',
      	data_ga_social : true,
      	data_track_addressbar: true,
        data_track_addressbar_paths: ['/201*/*/*/*/*']
      };
      var addthis_share = {
      	
      	url_transforms : {
      		shorten: {
      			twitter: 'bitly'
      		}
      	},
      	shorteners : {
      		bitly : {}
      	}
      }
      </script>

      <center>
      <div id="clustrmaps-widget"></div><script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=300&t=m&d=Zo-deincaJGsqhqjIWsujtdoNOMJsnnZLefKmxDKVv8&co=124b73&cmo=dd53ff&cmn=4ec724'></script>
      </center>
  </p>


  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> â€” the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js"></script>




  

  
  

  






  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>








  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  









  <script id="dsq-count-scr" src="https://fellgernonbit.disqus.com/count.js" async></script>




  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.2945731fa88332cb0ec33cf47d29879f.js"></script>



  <script src="/js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js" type="module"></script>




  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.af9327db0521d4a01354bfc8b77a4324.js" type="module"></script>













  
    
      
      <script src="https://kit.fontawesome.com/61d1e02f7e.js" crossorigin="anonymous"></script>

      
    
  






</body>
</html>
