<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: October 18, 2023 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&family=Karma&family=Mina&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&family=Karma&family=Mina&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.cfa383012e109fa07dd80bafcdf476df.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  






<script async src="https://www.googletagmanager.com/gtag/js?id=G-3CBVR6GQ07"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-3CBVR6GQ07', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>























  
  
  






  <meta name="author" content="Leonardo Collado-Torres" />





  

<meta name="description" content="It&rsquo;s exciting when great people help each other get things done This is a simple networking story, which might not be surprising to some but I was happily surprised by it." />



<link rel="alternate" hreflang="en-us" href="https://lcolladotor.github.io/2014/02/26/excited-by-willingness-to-help-get-things-done/" />
<link rel="canonical" href="https://lcolladotor.github.io/2014/02/26/excited-by-willingness-to-help-get-things-done/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#FF6771" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@lcolladotor" />
  <meta property="twitter:creator" content="@lcolladotor" />
<meta property="twitter:image" content="https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_512x512_fill_lanczos_center_3.png" />
<meta property="og:site_name" content="L. Collado-Torres" />
<meta property="og:url" content="https://lcolladotor.github.io/2014/02/26/excited-by-willingness-to-help-get-things-done/" />
<meta property="og:title" content="rMaps Mexico map | L. Collado-Torres" />
<meta property="og:description" content="It&rsquo;s exciting when great people help each other get things done This is a simple networking story, which might not be surprising to some but I was happily surprised by it." /><meta property="og:image" content="https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2014-02-26T00:00:00&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2018-02-17T17:10:57-05:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lcolladotor.github.io/2014/02/26/excited-by-willingness-to-help-get-things-done/"
  },
  "headline": "rMaps Mexico map",
  
  "datePublished": "2014-02-26T00:00:00Z",
  "dateModified": "2018-02-17T17:10:57-05:00",
  
  "author": {
    "@type": "Person",
    "name": "Leonardo Collado-Torres"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "L. Collado-Torres",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lcolladotor.github.io/media/icon_hu2b32c4ab415f12f472f73c7b0301b0d1_19400_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "It\u0026rsquo;s exciting when great people help each other get things done This is a simple networking story, which might not be surprising to some but I was happily surprised by it."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>rMaps Mexico map | L. Collado-Torres</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="83d1c670da1dc210fb507e5ee24da5b5" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.028535d572102c468e4bcd43201c3601.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">L. Collado-Torres</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">L. Collado-Torres</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#team"><span>Team</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#talks_favorite"><span>Talks</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#publications"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#blog"><span>Blog</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#cv"><span>CV</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>rMaps Mexico map</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Sat, Feb 17, 2018
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  
  
    <span class="middot-divider"></span>
    <a href="/2014/02/26/excited-by-willingness-to-help-get-things-done/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/rstats/">rstats</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <h2 id="its-exciting-when-great-people-help-each-other-get-things-done">It&rsquo;s exciting when great people help each other get things done</h2>
<p>This is a simple networking story, which might not be surprising to some but I was happily surprised by it. This is how the story goes:</p>
<p>Two weeks ago <code>rMaps</code> (<span class="showtooltip" title="Vaidyanathan R (2014). rMaps: Interactive Maps from R. R package version 0.1."><a href="">Vaidyanathan, 2014</a></span>) was released. After making a <a href="http://lcolladotor.github.io/2014/02/10/rMaps-released/#.Uwz64kJdV18" target="_blank" rel="noopener">blog post</a> about it I thought about using it to make a map of the homicide rate in Mexico over the recent years. First, I had the question of how to make custom maps with <code>rMaps</code>. <a href="https://github.com/tyokota" target="_blank" rel="noopener">@tyokota</a> had the same question and started asking <a href="https://github.com/ramnathv" target="_blank" rel="noopener">Ramnath</a> about it in <a href="https://github.com/ramnathv/rMaps/issues/6" target="_blank" rel="noopener">rMaps issue 6</a>. Then I realized I needed a specific file with the map information. Google lead me to <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> who has created the map from official Mexican sources, downloaded the homicide data, cleaned it, and made several maps and analyses: all his work is very impressive! I thought that it&rsquo;d be very cool if <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> and <a href="https://github.com/ramnathv" target="_blank" rel="noopener">Ramnath</a> connected, and they did! I saw them interacting via Twitter (<a href="https://twitter.com/diegovalle/status/433619946434596864" target="_blank" rel="noopener">here</a> and <a href="https://twitter.com/ramnath_vaidya/status/433813747593801728" target="_blank" rel="noopener">here</a>) and via <a href="https://github.com/ramnathv/rMaps/issues/6" target="_blank" rel="noopener">GitHub</a>. After sharing <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a>&rsquo;s work with my friends, it turned out that some old friends already knew him (<a href="https://twitter.com/unRob/status/433675310542749696" target="_blank" rel="noopener">here</a> and high school friends). Another friend was interested in additional features and I suggested her to contact <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> via Twitter: he quickly replied as you can see <a href="https://twitter.com/diegovalle/status/434444498341347328" target="_blank" rel="noopener">here</a>.</p>
<p>Beyond how impressive <code>rMaps</code> and <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a>&rsquo;s work on mexican data are, I was amazed by the willingness to help each other and how great people easily connected. I believe this is one of the great features of both GitHub and Twitter where you can share your code, ask questions, try to answer them, meet people working with your tools, etc. You can even offer to PayPal a beer like <a href="https://github.com/tyokota" target="_blank" rel="noopener">@tyokota</a> did.</p>
<p>After all their great work, now someone like me (aka, without knowing javascript, Datamaps, etc) can walk you through an example of making an interactive choropleth map showing the homicides rates in Mexico from 1997 to 2013.</p>
<h2 id="homicides-rates-in-mexico-1997-2013">Homicides rates in Mexico 1997-2013</h2>
<p>The first thing we need to make a custom map using <code>rMaps</code> is a <a href="http://en.wikipedia.org/wiki/TopoJSON" target="_blank" rel="noopener">topojson</a> file which in this case specifies the mexican states boundaries. This process is explained in more detail by <a href="https://github.com/tyokota" target="_blank" rel="noopener">@tyokota</a> at <a href="https://github.com/tyokota/custom-map" target="_blank" rel="noopener">custom-map</a> which you can view <a href="https://github.com/tyokota/custom-map/blob/master/custom-map.Rmd" target="_blank" rel="noopener">here</a>.</p>
<p>In this particular example, <a href="http://www.inegi.org.mx/" target="_blank" rel="noopener">INEGI</a> which is the National Institute of Statistics and Geography of Mexico has a map of the mexican states. <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> explained how to download it <a href="https://github.com/ramnathv/rMaps/issues/6#issuecomment-34942284" target="_blank" rel="noopener">here</a>.</p>
<p>But before doing so, you might to install <code>topojson</code> like I did below following the <a href="https://github.com/mbostock/topojson/wiki/Installation" target="_blank" rel="noopener">installation instructions</a>. In the terminal:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Install node.js following instructions at https://github.com/mbostock/topojson/wiki/Installation</span>
</span></span><span class="line"><span class="cl">brew install node
</span></span><span class="line"><span class="cl"><span class="c1">## Install topojson</span>
</span></span><span class="line"><span class="cl">npm install -g topojson
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Download map info from INEGI (Mexican official source)</span>
</span></span><span class="line"><span class="cl">curl -o estados.zip http://mapserver.inegi.org.mx/MGN/mge2010v5_0.zip
</span></span><span class="line"><span class="cl"><span class="c1">## Decompress file</span>
</span></span><span class="line"><span class="cl">unzip estados.zip
</span></span><span class="line"><span class="cl"><span class="c1">## Create shapefile</span>
</span></span><span class="line"><span class="cl">ogr2ogr states.shp Entidades_2010_5.shp -t_srs <span class="s2">&#34;+proj=longlat +ellps=WGS84 +no_defs +towgs84=0,0,0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## id-property needed so that DataMaps knows how to color the map</span>
</span></span><span class="line"><span class="cl">topojson -o mx_states.json -s 1e-7 -q 1e5 states.shp -p <span class="nv">state_code</span><span class="o">=</span>+CVE_ENT,name<span class="o">=</span>NOM_ENT --id-property NOM_ENT
</span></span></code></pre></div><p>Now that we have the <a href="http://en.wikipedia.org/wiki/TopoJSON" target="_blank" rel="noopener">topojson</a> file <strong>mx_states.json</strong> we need to get the actual homicide data. <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> has gone through the whole process of acquiring the data from official mexican sources and cleaning it. Lets download it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># Download crime data</span>
</span></span><span class="line"><span class="cl"><span class="c1">## From crimenmexico.diegovalle.net/en/csv</span>
</span></span><span class="line"><span class="cl"><span class="c1">## All local crimes at the state level</span>
</span></span><span class="line"><span class="cl"><span class="nf">download.file</span><span class="p">(</span><span class="s">&#34;http://crimenmexico.diegovalle.net/en/csv/fuero-comun-estados.csv.gz&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fuero-comun-estados.csv.gz&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>The data is not completely ready for us to use it and we need to reshape it a bit. In particular, we want to consider only the intentional homicides and group the data by state and date. We can get this to work by using <code>dplyr</code> (<span class="showtooltip" title="Wickham H and Francois R (2014). dplyr: dplyr: a grammar of data manipulation. R package version 0.1.1."><a href="http://CRAN.R-project.org/package=dplyr">Wickham &amp; Francois, 2014</a></span>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Load required packages</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;dplyr&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Load the crime data</span>
</span></span><span class="line"><span class="cl"><span class="n">crime</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&#34;fuero-comun-estados.csv.gz&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Only intentional homicides</span>
</span></span><span class="line"><span class="cl"><span class="n">crime</span> <span class="o">&lt;-</span> <span class="nf">subset</span><span class="p">(</span><span class="n">crime</span><span class="p">,</span> <span class="n">crime</span> <span class="o">==</span> <span class="s">&#34;HOMICIDIOS&#34;</span> <span class="o">&amp;</span> <span class="n">type</span> <span class="o">==</span> <span class="s">&#34;DOLOSOS&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Sum homicides by firearm, etc and group by state and date</span>
</span></span><span class="line"><span class="cl"><span class="n">hom</span> <span class="o">&lt;-</span> <span class="n">crime</span> <span class="o">%.%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">filter</span><span class="p">(</span><span class="n">year</span> <span class="o">%in%</span> <span class="m">1997</span><span class="o">:</span><span class="m">2013</span><span class="p">)</span> <span class="o">%.%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">state_code</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">type</span><span class="p">)</span> <span class="o">%.%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">summarise</span><span class="p">(</span><span class="n">total</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">population</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">population</span><span class="p">)</span> <span class="p">)</span> <span class="o">%.%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">rate</span> <span class="o">=</span> <span class="n">total</span> <span class="o">/</span> <span class="n">population</span> <span class="o">*</span> <span class="m">10</span><span class="n">^5</span><span class="p">)</span> <span class="o">%.%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="n">state_code</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## How are states coded?</span>
</span></span><span class="line"><span class="cl"><span class="nf">summary</span><span class="p">(</span><span class="n">hom</span><span class="o">$</span><span class="n">state_code</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
</span></span><span class="line"><span class="cl">##    1.00    8.75   16.50   16.50   24.20   32.00
</span></span></code></pre></div><p>We have the slight inconvenience that states are coded as integers from 1 to 32 instead of using their names. Using another of the files supplied by <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> we can merge the codes. This requires using the <code>foreign</code> (<span class="showtooltip" title="R Core Team (2014). foreign: Read Data Stored by Minitab, S, SAS, SPSS, Stata, Systat, Weka, dBase.... R package version 0.8-59."><a href="http://CRAN.R-project.org/package=foreign">R Core Team</a></span>) package for loading a <em>dbf</em> file and then merging both data sets with <code>plyr</code> (<span class="showtooltip" title="Wickham H (2011). 'The Split-Apply-Combine Strategy for Data Analysis.' Journal of Statistical Software, 40(1), pp. 1-29. ."><a href="http://www.jstatsoft.org/v40/i01/">Wickham, 2011</a></span>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Needed for read.dbf</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;foreign&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## The dbf from the state shapefile needed to merge state_code with state</span>
</span></span><span class="line"><span class="cl"><span class="c1">## names</span>
</span></span><span class="line"><span class="cl"><span class="n">codes</span> <span class="o">&lt;-</span> <span class="nf">read.dbf</span><span class="p">(</span><span class="s">&#34;states.dbf&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">codes</span><span class="o">$</span><span class="n">NOM_ENT</span> <span class="o">&lt;-</span> <span class="nf">iconv</span><span class="p">(</span><span class="n">codes</span><span class="o">$</span><span class="n">NOM_ENT</span><span class="p">,</span> <span class="s">&#34;windows-1252&#34;</span><span class="p">,</span> <span class="s">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">codes</span><span class="o">$</span><span class="n">CVE_ENT</span> <span class="o">&lt;-</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="n">codes</span><span class="o">$</span><span class="n">CVE_ENT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">codes</span><span class="o">$</span><span class="n">OID</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
</span></span><span class="line"><span class="cl"><span class="nf">names</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;state_code&#34;</span><span class="p">,</span> <span class="s">&#34;name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Load plyr for join(). Loading it before creates a problem with the dplyr</span>
</span></span><span class="line"><span class="cl"><span class="c1">## call above</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;plyr&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Names needed for the map</span>
</span></span><span class="line"><span class="cl"><span class="n">hom</span> <span class="o">&lt;-</span> <span class="nf">join</span><span class="p">(</span><span class="n">hom</span><span class="p">,</span> <span class="n">codes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Lets look at the data</span>
</span></span><span class="line"><span class="cl"><span class="nf">head</span><span class="p">(</span><span class="n">hom</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">##   state_code year    type total population   rate           name
</span></span><span class="line"><span class="cl">## 1          1 1997 DOLOSOS   355     958126 37.051 Aguascalientes
</span></span><span class="line"><span class="cl">## 2          1 1998 DOLOSOS    66     975585  6.765 Aguascalientes
</span></span><span class="line"><span class="cl">## 3          1 1999 DOLOSOS    27     992515  2.720 Aguascalientes
</span></span><span class="line"><span class="cl">## 4          1 2000 DOLOSOS    14    1009215  1.387 Aguascalientes
</span></span><span class="line"><span class="cl">## 5          1 2001 DOLOSOS    22    1026437  2.143 Aguascalientes
</span></span><span class="line"><span class="cl">## 6          1 2002 DOLOSOS    26    1044578  2.489 Aguascalientes
</span></span></code></pre></div><p>Great! We now have state names under <em>name</em> and the intentional homicide rate under <em>rate</em> (in homicides per 100,000) for each specific <em>year</em>. We can thus proceed to making the interactive choropleth map using the <code>ichoropleth</code> function described by <a href="https://github.com/ramnathv" target="_blank" rel="noopener">Ramnath</a> <a href="http://rmaps.github.io/blog/posts/animated-choropleths/index.html" target="_blank" rel="noopener">here</a>. This requires specifying the <a href="http://en.wikipedia.org/wiki/TopoJSON" target="_blank" rel="noopener">topojson</a> file which is specified via <em>dataUrl</em>, the name of the map specified via <em>scope</em> and the most tricky part (for me at least) is that we need to specify the <em>setProjection</em>. These are all properties of the <a href="https://github.com/markmarkoh/datamaps" target="_blank" rel="noopener">Datamaps</a> library. In particular, the wiki describes <a href="https://github.com/markmarkoh/datamaps/blob/master/README.md#using-custom-maps" target="_blank" rel="noopener">how to use custom maps</a> but this requires some javascript knowledge.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Make the map</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;rMaps&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">d1</span> <span class="o">&lt;-</span> <span class="nf">ichoropleth</span><span class="p">(</span><span class="n">rate</span> <span class="o">~</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">hom</span><span class="p">,</span> <span class="n">ncuts</span> <span class="o">=</span> <span class="m">9</span><span class="p">,</span> <span class="n">pal</span> <span class="o">=</span> <span class="s">&#39;YlOrRd&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">animate</span> <span class="o">=</span> <span class="s">&#39;year&#39;</span><span class="p">,</span>  <span class="n">map</span> <span class="o">=</span> <span class="s">&#39;states&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## Note that I am hosting the mx_states.json in Dropbox</span>
</span></span><span class="line"><span class="cl"><span class="c1">## but if you are doing it locally, you only need</span>
</span></span><span class="line"><span class="cl"><span class="c1">## dataUrl = &#34;mx_states.json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">d1</span><span class="o">$</span><span class="nf">set</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="n">geographyConfig</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">   <span class="n">dataUrl</span> <span class="o">=</span> <span class="s">&#34;https://dl.dropboxusercontent.com/u/10794332/mx_states.json&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">),</span>
</span></span><span class="line"><span class="cl"> <span class="n">scope</span> <span class="o">=</span> <span class="s">&#39;states&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="n">setProjection</span> <span class="o">=</span> <span class="s">&#39;#! function( element, options ) {
</span></span></span><span class="line"><span class="cl"><span class="s">   var projection, path;
</span></span></span><span class="line"><span class="cl"><span class="s">   projection = d3.geo.mercator()
</span></span></span><span class="line"><span class="cl"><span class="s">    .center([-89, 21]).scale(element.offsetWidth)
</span></span></span><span class="line"><span class="cl"><span class="s">    .translate([element.offsetWidth / 2, element.offsetHeight / 2]);
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">   path = d3.geo.path().projection( projection );
</span></span></span><span class="line"><span class="cl"><span class="s">   return {path: path, projection: projection};
</span></span></span><span class="line"><span class="cl"><span class="s">  } !#&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">d1</span><span class="o">$</span><span class="nf">save</span><span class="p">(</span><span class="s">&#39;rMaps.html&#39;</span><span class="p">,</span> <span class="n">cdn</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</span></span></code></pre></div><p>The end result is shown below:</p>
<iframe src='
http://lcolladotor.github.io/figs/2014-02-26-excited-by-willingness-to-help-get-things-done/rMaps.html
' scrolling='no' seamless
class='rChart datamaps '
id=iframe-
chart1859838d5e973
width=100%
height=500px
 ></iframe>
<p>You can also share the map using the <em>publish</em> method as shown below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">d1</span><span class="o">$</span><span class="nf">publish</span><span class="p">(</span><span class="s">&#34;Intentional homicides rates for Mexico 1997-2013&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## You&#39;ll need a GitHub account</span>
</span></span></code></pre></div><p>You will get a link to the rCharts viewer such as <a href="http://rcharts.io/viewer/?9223554#.Uw1tNEJdV18" target="_blank" rel="noopener">this one</a> or if you prefer, you can also view the result using Pagist as shown <a href="http://www.pagist.info/9223554" target="_blank" rel="noopener">here</a>.</p>
<p>The code presented in this post was written by <a href="https://github.com/diegovalle" target="_blank" rel="noopener">@diegovalle</a> which can you view <a href="http://bl.ocks.org/diegovalle/8967565" target="_blank" rel="noopener">here</a> and <a href="https://github.com/ramnathv" target="_blank" rel="noopener">Ramnath</a> which is shown <a href="https://github.com/ramnathv/rMaps/issues/6#issuecomment-34946041" target="_blank" rel="noopener">here</a>. I also figured out the trick of hosting the <a href="http://en.wikipedia.org/wiki/TopoJSON" target="_blank" rel="noopener">topojson</a> file at Dropbox from <a href="https://github.com/tyokota" target="_blank" rel="noopener">@tyokota</a>&rsquo;s <a href="https://github.com/tyokota/custom-map/blob/master/custom-map.Rmd" target="_blank" rel="noopener">code</a> as I was running into <em>Access-Control-Allow-Origin</em> errors when hosting it in my academic website. Finally, but not least, <a href="https://github.com/ramnathv" target="_blank" rel="noopener">Ramnath</a> appropriately insists that all of this would not be possible without libraries such as <a href="https://github.com/markmarkoh/datamaps" target="_blank" rel="noopener">Datamaps</a>.</p>
<h3 id="references">References</h3>
<p>Citations made with <code>knitcitations</code> (<span class="showtooltip" title="Boettiger C (2014). knitcitations: Citations for knitr markdown files. R package version 0.5-0."><a href="http://CRAN.R-project.org/package=knitcitations">Boettiger, 2014</a></span>).</p>
<ul>
<li>Hadley Wickham, Romain Francois,   (2014) dplyr: dplyr: a grammar of data manipulation.  <a href="http://CRAN.R-project.org/package=dplyr" target="_blank" rel="noopener">http://CRAN.R-project.org/package=dplyr</a></li>
<li>R Core Team ,   (2014) foreign: Read Data Stored by Minitab, S, SAS, SPSS, Stata, Systat, Weka,
dBase, &hellip;.  <a href="http://CRAN.R-project.org/package=foreign" target="_blank" rel="noopener">http://CRAN.R-project.org/package=foreign</a></li>
<li>Carl Boettiger,   (2014) knitcitations: Citations for knitr markdown files.  <a href="http://CRAN.R-project.org/package=knitcitations" target="_blank" rel="noopener">http://CRAN.R-project.org/package=knitcitations</a></li>
<li>Hadley Wickham,   (2011) The Split-Apply-Combine Strategy for Data Analysis.  <em>Journal of Statistical Software</em>  <strong>40</strong>  (1)   1-29  <a href="http://www.jstatsoft.org/v40/i01/" target="_blank" rel="noopener">http://www.jstatsoft.org/v40/i01/</a></li>
<li>Ramnath Vaidyanathan,   (2014) rMaps: Interactive Maps from R.</li>
</ul>
<h3 id="reproducibility">Reproducibility</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">sessionInfo</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">## R version 3.0.2 (2013-09-25)
</span></span><span class="line"><span class="cl">## Platform: x86_64-apple-darwin10.8.0 (64-bit)
</span></span><span class="line"><span class="cl">## 
</span></span><span class="line"><span class="cl">## locale:
</span></span><span class="line"><span class="cl">## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
</span></span><span class="line"><span class="cl">## 
</span></span><span class="line"><span class="cl">## attached base packages:
</span></span><span class="line"><span class="cl">## [1] stats     graphics  grDevices utils     datasets  methods   base     
</span></span><span class="line"><span class="cl">## 
</span></span><span class="line"><span class="cl">## other attached packages:
</span></span><span class="line"><span class="cl">## [1] rMaps_0.1.1         plyr_1.8            foreign_0.8-59     
</span></span><span class="line"><span class="cl">## [4] dplyr_0.1.1         knitcitations_0.5-0 bibtex_0.3-6       
</span></span><span class="line"><span class="cl">## [7] knitr_1.5          
</span></span><span class="line"><span class="cl">## 
</span></span><span class="line"><span class="cl">## loaded via a namespace (and not attached):
</span></span><span class="line"><span class="cl">##  [1] assertthat_0.1     digest_0.6.4       evaluate_0.5.1    
</span></span><span class="line"><span class="cl">##  [4] formatR_0.10       grid_3.0.2         httr_0.2          
</span></span><span class="line"><span class="cl">##  [7] lattice_0.20-24    rCharts_0.4.2      RColorBrewer_1.0-5
</span></span><span class="line"><span class="cl">## [10] Rcpp_0.11.0        RCurl_1.95-4.1     RJSONIO_1.0-3     
</span></span><span class="line"><span class="cl">## [13] stringr_0.6.2      tools_3.0.2        whisker_0.3-2     
</span></span><span class="line"><span class="cl">## [16] XML_3.95-0.2       xtable_1.7-1       yaml_2.1.10
</span></span></code></pre></div><p>Check other topics on <a href="https://twitter.com/search?q=%23rstats" target="_blank" rel="noopener">#rstats</a>.</p>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/network/">Network</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F&amp;text=rMaps&#43;Mexico&#43;map" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F&amp;t=rMaps&#43;Mexico&#43;map" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=rMaps%20Mexico%20map&amp;body=https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F&amp;title=rMaps&#43;Mexico&#43;map" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=rMaps&#43;Mexico&#43;map%20https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Flcolladotor.github.io%2F2014%2F02%2F26%2Fexcited-by-willingness-to-help-get-things-done%2F&amp;title=rMaps&#43;Mexico&#43;map" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://lcolladotor.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hub730ffb954e879fe0ab174cacb839b41_1326712_270x270_fill_lanczos_center_3.png" alt="Leonardo Collado-Torres"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://lcolladotor.github.io/">Leonardo Collado-Torres</a></h5>
      <h6 class="card-subtitle">Investigator @ LIBD, Assistant Professor, Department of Biostatistics @ JHBSPH</h6>
      <p class="card-text"><a href="https://twitter.com/search?q=%23rstats&amp;src=hashtag_click" target="_blank" rel="noopener">#rstats</a> <a href="https://twitter.com/Bioconductor" target="_blank" rel="noopener">@Bioconductor</a>/🧠 genomics <a href="https://twitter.com/LieberInstitute" target="_blank" rel="noopener">@LieberInstitute</a>/<a href="https://twitter.com/lcgunam" target="_blank" rel="noopener">@lcgunam</a> <a href="https://twitter.com/jhubiostat" target="_blank" rel="noopener">@jhubiostat</a> <a href="https://twitter.com/jtleek" target="_blank" rel="noopener">@jtleek</a> <a href="https://twitter.com/andrewejaffe" target="_blank" rel="noopener">@andrewejaffe</a> alumni/<a href="https://twitter.com/LIBDrstats" target="_blank" rel="noopener">@LIBDrstats</a> <a href="https://twitter.com/CDSBMexico" target="_blank" rel="noopener">@CDSBMexico</a> co-founder</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:lcolladotor@gmail.com" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="http://lcolladotor.github.io" target="_blank" rel="noopener">
        <i class="fas fa-home"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/lcolladotor" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.youtube.com/@lcolladotor/playlists" target="_blank" rel="noopener">
        <i class="fab fa-youtube"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=h57-MykAAAAJ" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/lcolladotor" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="http://orcid.org/0000-0003-2140-308X" target="_blank" rel="noopener">
        <i class="ai ai-orcid"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://www.ncbi.nlm.nih.gov/myncbi/leonardo.collado%20torres.1/bibliography/public/" target="_blank" rel="noopener">
        <i class="ai ai-pubmed"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://impactstory.org/u/0000-0003-2140-308X" target="_blank" rel="noopener">
        <i class="ai ai-impactstory"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/lcollado/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://publons.com/a/1262671" target="_blank" rel="noopener">
        <i class="ai ai-publons"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="http://lcolladotor.github.io/cv/en_CV_lcollado.pdf" target="_blank" rel="noopener">
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  
  

  

  
  <section id="comments">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "fellgernonbit" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  










  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    All thoughts and opinions here are my own (Leonardo Collado Torres). The icon was designed by <a href="https://www.linkedin.com/in/mauricio-guzman-6529b551/" target="_blank" rel="noopener">Mauricio Guzmán</a> and is inspired by <a href="https://en.wikipedia.org/wiki/Huichol" target="_blank" rel="noopener">Huichol culture</a>; it represents my community building interests. © 2011-2023 LCT. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank">CC BY NC SA 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-sa fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>




  
  <p>
      
      
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ef23e545d41b87c"></script>
      
      

      <script type="text/javascript">
      var addthis_config = {
      	data_ga_property: 'UA-45299226-1',
      	data_ga_social : true,
      	data_track_addressbar: true,
        data_track_addressbar_paths: ['/201*/*/*/*/*']
      };
      var addthis_share = {
      	
      	url_transforms : {
      		shorten: {
      			twitter: 'bitly'
      		}
      	}, 
      	shorteners : {
      		bitly : {}
      	}
      }
      </script>
      
      <center>	 
      <div id="clustrmaps-widget"></div><script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=300&t=m&d=Zo-deincaJGsqhqjIWsujtdoNOMJsnnZLefKmxDKVv8&co=124b73&cmo=dd53ff&cmn=4ec724'></script>
      </center>
  </p>
  

  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.f64289d8217e08e3afcd597d60836062.js"></script>




  

  
  

  






  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>








  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  









  <script id="dsq-count-scr" src="https://fellgernonbit.disqus.com/count.js" async></script>




  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.ead4a376bcf2c4714888c770ea9b0040.js"></script>



  <script src="/js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js" type="module"></script>




  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>


















</body>
</html>
